{{ $featured_image := partial "func/GetFeaturedImage.html" . }}

{{/* header for desktop and tablet */}}
<div id="menu-desktop">
{{ if $featured_image }}
  {{/* Trimming the slash and adding absURL make sure the image works no matter where our site lives */}}
  <header class="cover bg-center" style="background-image: url('{{ $featured_image }}');z-index:1;">
    <div class="{{ .Site.Params.cover_dimming_class | default "bg-black-30" }}">
      {{ partial "site-navigation.html" .}}
      <div class="tc-l pv6 ph3 ph4-ns">
        <h1 class="header-title-font f2 f1-l f3-ns fw2 white-90 mv4 lh-title">
          {{ .Title | default .Site.Title }}
        </h1>
        {{ with .Params.description }}
          <h2 class="fw1 f5 f3-l white-80 measure-wide-l center mt3">
            {{ . }}
          </h2>
        {{ end }}
      </div>
    </div>
  </header>
{{ else }}
  <header>
    <div class="pb3-m pb6-l {{ .Site.Params.background_color_class | default "bg-black" }}">
      {{ partial "site-navigation.html" . }}
      <div class="tc-l pv3 ph3 ph4-ns">
        <h1 class="header-title-font f1 f2-ns f-subheadline-l fw2 light-silver mb0 lh-title">
          {{ .Title | default .Site.Title }}
        </h1>
        {{ with .Params.description }}
          <h2 class="fw1 f5 f3-l white-80 measure-wide-l center lh-copy mt3 mb4">
            {{ . }}
          </h2>
        {{ end }}
      </div>
    </div>
  </header>
{{ end }}
</div>

{{/* header with mobile menu */}}
<div id="menu-mobile" class="">
  {{ partial "site-navigation-mobile.html" .}}

  <div class="sticky-header" id="small-menu">
    <div class="flex justify-between items-center center pv2 ph3 bg-white shadow-4">
      <div class="flex f5 f4-l fw4 pl4-l white">
        <a href="{{ .Site.Home.RelPermalink }}">
          {{ if .Site.Params.siteLogoMobile }}
            {{ with .Site.Params.siteLogoMobile }}
            <img src="{{ relURL . }}" class="w100 mw3-l v-mid site-logo" alt="{{ $.Site.Title }}" >
            {{ end }}
          {{ else }}
            {{ with .Site.Params.siteLogo }}
            <img src="{{ relURL . }}" class="w100 mw3-l v-mid site-logo" alt="{{ $.Site.Title }}" >
            {{ end }}
          {{ end }}
        </a>
        <a href="{{ .Site.Home.RelPermalink }}" class="f3-l f0-m f0-ns fw2 pl3 hover-white no-underline white-90 text-bold">
          {{ .Site.Title }}
        </a>
      </div>
      <div class="flex items-center">
        {{ partial "i18nlist.html" . }}
        <button class="mr2-ns v-mid" onclick="topFunction();toggleTopFunction()" >
          <svg class="v-mid" viewBox="0 0 16 16" aria-hidden="true" width="2em" height="2em">
            <path fill-rule="evenodd" d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z"/>
          </svg>
        </button>
      </div>
    </div>
  </div>

  {{ if $featured_image }}
  {{/* Trimming the slash and adding absURL make sure the image works no matter where our site lives */}}
  <header class="cover bg-center relative" style="background-image: url('{{ $featured_image }}');z-index:1;">
    <div class="{{ .Site.Params.cover_dimming_class | default "bg-black-30" }}">
    <div class="tc-l pv6 ph3 ph4-ns">
      <h1 class="header-title-font f1 f2-ns f-subheadline-l fw2 white-90 mv4 lh-title">
        {{ .Title | default .Site.Title }}
      </h1>
      {{ with .Params.description }}
      <h2 class="fw1 f5 f3-l white-80 measure-wide-l center mt3">
        {{ . }}
      </h2>
      {{ end }}
    </div>
    </div>
  </header>
  {{ else }}
  <header class="relative" style="z-index:1;">
    <div class="{{ .Site.Params.background_color_class | default "bg-black" }}">
    <div class="tc-l pv6 ph3 ph4-ns">
      <h1 class="header-title-font f1 f2-ns f-subheadline-l fw2 white-90 mv4 lh-title">
        {{ .Title | default .Site.Title }}
      </h1>
      {{ with .Params.description }}
      <h2 class="fw1 f5 f3-l white-80 measure-wide-l center mt3">
        {{ . }}
      </h2>
      {{ end }}
    </div>
    </div>
  </header>
  {{ end }}
</div>